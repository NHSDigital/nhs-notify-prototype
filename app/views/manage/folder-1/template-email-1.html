{% extends 'layout.html' %}

{% block pageTitle %}
  NHS.UK prototype kit
{% endblock %}

{% block beforeContent %}
{% endblock %}

{% block outerContent %}

<div class="nhsuk-back-link nhsuk-u-margin-top-4 nhsuk-u-margin-bottom-0">
  <a class="nhsuk-back-link__link" href="/manage/folder-1#email">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Back to {{ data['folder-name-1'] or defaults['folder-name-1'] }}
  </a>
</div>

{#
  {{ breadcrumb({
    items: [
      {
        href: "/manage",
        text: "Template library"
      },
      {
        href: "/manage/folder-1#email",
        text: data['folder-name-1'] or defaults['folder-name-1']
      }
    ],
    classes: "nhsuk-u-padding-bottom-0"
  }) }}
#}

{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

      {% if data['template-email-name-1-approved'] == '1' %}

      {{ tag({
        text: "Approved",
        classes: "nhsuk-tag--grey"
      })}}

      {% else %}

      {{ tag({
        text: "Draft"
      })}}

      {% endif %}

      <h1>
        Email: {{ data['template-email-name-1'] or defaults['template-email-name-1'] }}
      </h1>

      <p class="nhsuk-body-s">
        <strong>Folder</strong><br />
        {{ data['folder-name-1'] or defaults['folder-name-1'] }}<br />
        <a href="">Move to a different folder</a>
      </p>

      <p class="nhsuk-body-s">
        <strong>Template ID</strong><br />
        a4b171b5-431f-4a5b-9d7a-9a4903c98e66
      </p>

      <p class="nhsuk-body-s">
        <strong>Last edited</strong><br />
        At 10:35 on 10th Feb 2024 by Mary Poppins<br />
        <a href="/manage/template-version-history?message-type=email">View edit history</a>
      </p>

      <table role="table" class="nhsuk-table-responsive notify-template-content nhsuk-u-margin-bottom-4">

        <tbody class="nhsuk-table__body">
          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell">
              From
            </th>
            <td role="cell" class="nhsuk-table__cell">
              NHS organisation name
            </td>
          </tr>
          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell">
              Subject
            </th>
            <td role="cell" class="nhsuk-table__cell">
              {{ data['template-email-subject-1'] or defaults['template-email-subject-1'] }}
            </td>
          </tr>
          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell">
              Message
            </th>
            <td role="cell" class="nhsuk-table__cell">
              {{ data['template-email-message-1'] or defaults['template-email-message-1'] }}
            </td>
          </tr>
        </tbody>

      </table>

      {% if data['template-email-name-1-approved'] == '1' %}

      <p>This template cannot be edited or deleted because it has been approved.</p>

      {% else %}
      
      <a href="/manage/template-approve?approve-template-name={{ data['template-email-name-1'] or defaults['template-email-name-1'] }}&template-email-name-1-approved=0" class="nhsuk-button">Approve</a>

      <a href="/manage/folder-1/create-email-template?mode=edit" class="nhsuk-button nhsuk-button--secondary nhsuk-u-margin-left-3">Edit</a>

      <p><a href="/manage/template-test?message-type=email">Preview this template</a></p>

      {% endif %}

    </div>
  </div>
{% endblock %}