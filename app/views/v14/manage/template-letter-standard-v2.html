{% extends 'v14/layout.html' %}



{% block beforeContent %}

{{ backLink({
  "href": "folder-templates",
  "text": "Back to all templates"
}) }}

{% endblock %}

{% block content %}
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <div class="nhsuk-u-reading-width">

        {% if data['template-locked'] == '1' %}

        {% include "../includes/template-locked-message.html" %}

        {% endif %}

        <span class="nhsuk-caption-l">Template</span>
        <h1 class="nhsuk-heading-xl">
          {{ data['letterStandardTemplateName'] }}
        </h1>

      </div>

      {% if data['templates'] %}
        <h2 class="nhsuk-heading-m">Created Templates</h2>
        <table class="nhsuk-table">
          <thead class="nhsuk-table__head">
            <tr class="nhsuk-table__row">
              <th class="nhsuk-table__header">ID</th>
              <th class="nhsuk-table__header">Type</th>
              <th class="nhsuk-table__header">Language</th>
              <th class="nhsuk-table__header">Name</th>
              <th class="nhsuk-table__header">Content</th>
              <th class="nhsuk-table__header"></th>
            </tr>
          </thead>
          <tbody class="nhsuk-table__body">
            {% for template in data['templates'] %}
              <tr class="nhsuk-table__row">
                <td class="nhsuk-table__cell">{{ template.letterStandardTemplateId }}</td>
                <td class="nhsuk-table__cell">{{ template.letterStandardTemplateType }}</td>
                <td class="nhsuk-table__cell">{{ template.letterStandardTemplateLanguage }}</td>
                <td class="nhsuk-table__cell">{{ template.letterStandardTemplateName }}</td>
                <td class="nhsuk-table__cell">{{ template.letterStandardTemplateContent }}</td>
                <td class="nhsuk-table__cell"><a href="edit-letter-template-v2/{{ template.letterStandardTemplateId }}">Edit template</a></td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}

      <table role="table" class="notify-template-content nhsuk-u-margin-bottom-4">
        <tbody class="nhsuk-table__body">
          
          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell" style="width:20%;">
              Template ID
            </th>
            <td role="cell" class="nhsuk-table__cell" style="font-family: monospace;">
              {{ data['letterStandardTemplateId'] }}
            </td>
          </tr>

          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell" style="width: 20%;">
              Type
            </th>
            <td role="cell" class="nhsuk-table__cell">
              {{ data['letterStandardTemplateType'] }}
            </td>
          </tr>

          <tr role="row" class="nhsuk-table__row">
            <th role="cell" class="nhsuk-table__cell" style="width: 20%;">
              Status
            </th>
            <td role="cell" class="nhsuk-table__cell">
              
              {% if data['template-locked'] == '1' %}

              {{ tag({
                text: "Locked",
                classes: "nhsuk-tag--orange"
              })}}
              {% else %}

              {{ tag({
                text: "Draft",
                classes: "nhsuk-tag--green"
              })}}

              {% endif %}

            </td>
          </tr>

        </tbody>
      </table>

      <div class="nhsnotify-letter-preview">

        <img src="/images/letter-standard-page-1.jpg" alt="">

        <img src="/images/letter-standard-page-2.jpg" alt="">

      </div>


      {% if data['template-locked'] != '1' %}

      <form action="create-letter-template?mode=edit" method="post">        
   
        {{ button({
          text: "Edit template",
          classes: "nhsuk-button--secondary"
        }) }}
  
      </form>

      {% endif %}

      <p><a href="folder-templates">Back to all templates</a></p>

    </div>
  </div>
{% endblock %}